<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css"/>
    <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Noto Sans KR", sans-serif;
        }
        .container{
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #calendar{
            flex: 1;
            width: 100%;
            /*background-color: red;*/
            /*width: 90%;*/
            /*height: 90%;*/
        }
        #list-container{
            flex: 1;
            padding: 10px;
            width: 100%;
            overflow: scroll;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-top: 1px solid #e0e0e0;
            /*width: 100%;*/
            /*height: 100%;*/
            /*display: flex;*/
            /*flex-direction: column;*/
            /*align-items: center;*/
        }
        .list-item-container {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            /*justify-content: center;*/
            /*align-items: center;*/
            padding: 10px;
            margin: 0px 10px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            background-color: #f5f5f5;
            /*box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);*/
            /*gap: 2px;*/
            /*white-space: nowrap;*/
            color: #3d3c3c;
            font-size: 13px;
        }
        .list-item-container > div {
            /*border-right: 1px solid #e0e0e0;*/
            padding: 1px;
        }
        .list-item-container > div:last-child {
            /*border-right: none;*/
        }
        .list-item-container > .class-name-container {
            text-align: center;
        }
        .list-item-container > .content-container {
            flex-grow: 1;
        }
        .list-item-container.checked {
            background-color: #d5edfa;
        }
        .location-container {
            text-align: left;
            font-weight: bold;
            font-size: 18px;
        }
        .content-container {
            font-size: 18px;
        }
        .time-container {
            font-size: 18px;
            display:flex;
            gap: 10px
        }
    </style>
</head>
<body>
<div class="container">
    <div id="calendar" ></div>
    <div id="list-container">
    </div>
</div>
<script>

    const Calendar = tui.Calendar;

    const container = document.getElementById('calendar');
    const options = {
        defaultView: 'week',
        usageStatistics: false,
        isReadOnly: true,
        useFormPopup: true,
        useDetailPopup: true,
        week: {
            showNowIndicator: false,
            showTimezoneCollapseButton: false,
            // narrowWeekend: true,
            // workweek: true,
            // visibleWeeksCount: 10,
            dayNames: ['일', '월', '화', '수', '목', '금', '토'],
            // dayDateFormatter: function(date) {
            //   return date.getDate();
            // },
            // hourStart: 15,
            // hourEnd: 22,
            // eventView: true,
            eventView: ['time'],
            taskView: false,
            // startDayOfWeek: 1,
        },

        // milestoneView: false,  // Disable milestone view
        // scheduleView: ['time'] // e.g. true, false, or ['allday', 'time']
        // week: {
        //   startDayOfWeek: 0,
        //   workweek: true,
        // },
        // timezone: {
        //   zones: [
        //     {
        //       timezoneName: 'Asia/Seoul',
        //       displayLabel: 'Seoul',
        //     },
        //     {
        //       timezoneName: 'Europe/London',
        //       displayLabel: 'London',
        //     },
        //   ],
        // },
        // calendars: [
        //   {
        //     id: 'cal1',
        //     name: '개인',
        //     backgroundColor: '#03bd9e',
        //   },
        //   {
        //     id: 'cal2',
        //     name: '직장',
        //     backgroundColor: '#00a9ff',
        //   },
        // ],
    };

    let calendar = new Calendar(container, options);
    calendar.setTheme({
        common: {
            // backgroundColor: 'red'
            // border: '12px solid #f00'
            // dayName: {
            //     color: '#515ce6',
            // },
            // holiday: {
            //     color: 'rgba(255, 64, 64, 0.5)',
            // },
            // gridSelection: {
            //     backgroundColor: 'rgba(81, 230, 92, 1)',
            //     border: '1px dotted #515ce6',
            // },
        },
        week: {
            today: {
                // color: 'red',
                backgroundColor: 'rgba(229, 229, 229, 0.05)',
            },

            dayName: {
                // borderLeft: 'none',
                // borderTop: '1px dotted red',
                // borderBottom: '1px dotted red',
                // backgroundColor: 'rgba(81, 92, 230, 0.05)',
            },
            dayGrid: {
                // borderRight: 'none',
                // backgroundColor: 'rgba(255, 92, 230, 0.05)',
            },
            timeGrid: {
                borderRight: '1px solid #e5e5e5',
                // backgroundColor: '#ff0000',

                // borderRight: 'none',
                // width: '200px'
            },
            pastTime: {
              color:'#555'
            },
            futureTime: {
                color: '#555',
            },
            nowIndicatorToday: { border: 'red' },
            nowIndicatorLabel: {
                // color: 'red',
            },
            timeGridHourLine: {
                borderBottom: '1px solid #f9f9f9',
            },
            timeGridHalfHourLine: {
                // borderBottom: '1px dotted #e5e5e5',
            //     // height:'10px'
            },
            // timeGridHourLine: {
            //     borderBottom: '1px solid #f9f9f9',
            //     height: '200px'
            // },
            dayGrid: {
                // borderRight: 'none',
                // backgroundColor: 'rgba(230,81,81,1)',
            },
            dayGridLeft: {
                borderRight: 'none',
                backgroundColor: 'rgba(81, 92, 230, 0.05)',
                width: '30px',
            },
            timeGridLeft: {
                // borderRight: 'none',
                backgroundColor: '#f5f5f5',
                width: '25px',
            },
        },
    });
    calendar.setOptions({
        template: {
            time(event) {
                return `<span  style="white-space: break-spaces">${event.title}</span>`;
            },
            weekDayName(model) {
                return `<span>${model.dayName}</span>`;
                // return `<span>${model.date}</span>&nbsp;&nbsp;<span>${model.dayName}</span>`;
            },
            // timegridNowIndicatorLabel({ time }) {
            //   return `current time: ${time}`;
            // },
            timegridDisplayPrimaryTime(model) {
                var hour = model.time.getHours();
                var formattedHour = hour < 10 ? '0' + hour : hour;
                return `${formattedHour}`;
            },
            // timegridDisplayTime({ time }) {
            //   return `sub timezone: ${time}`;
            // },
        },
    });

    // calendar.createEvents([
    //     {
    //         id: '1',
    //         // calendarId: 'cal1',
    //         title: 'timed event1',
    //         body: 'TOAST UI Calendar',
    //         start: '2024-02-25T10:00:00',
    //         end: '2024-02-25T11:00:00',
    //         location: 'Meeting Room A',
    //         attendees: ['A', 'B', 'C'],
    //         category: 'time',
    //         state: 'Free',
    //         isReadOnly: true,
    //         color: '#fff',
    //         backgroundColor: '#c00',
    //         customStyle: {
    //             fontStyle: 'italic',
    //             fontSize: '15px',
    //         },
    //     },
    //     {
    //         id: '2',
    //         // calendarId: 'cal1',
    //         title: 'timed event',
    //         body: 'TOAST UI Calendar',
    //         start: '2024-02-25T10:30:00',
    //         end: '2024-02-25T12:00:00',
    //         location: 'Meeting Room A',
    //         attendees: ['A', 'B', 'C'],
    //         category: 'time',
    //         state: 'Free',
    //         isReadOnly: true,
    //         color: '#fff',
    //         backgroundColor: '#c00',
    //         customStyle: {
    //             fontStyle: 'italic',
    //             fontSize: '15px',
    //         },
    //     },
    // ]);

    // const timedEvent = calendar.getEvent('1', 'cal1'); // EventObject
    // calendar.on('clickEvent', ({event}) => {
    //     console.log(event); // EventObject
    // });
    // calendar.setMilestoneVisibility(false);
    // calendar.setOptions({
    //   template: {
    //     milestone(event) {
    //       return `<span style:"color: blue;">${event.title}</span>`;
    //     },
    //   },
    // });
    // calendar.setTheme({
    //   week: {
    //     dayGrid: {
    //       borderRight: 'none',
    //       backgroundColor: 'rgba(81, 92, 230, 0.05)',
    //     },
    //     dayGridLeft: {
    //       borderRight: 'none',
    //       backgroundColor: 'rgba(81, 92, 230, 0.05)',
    //       width: '144px',
    //     },
    //   },
    // });
</script>
<script>
    const randomRgbHex = () => {
        const rgb = Math.floor(Math.random() * 0xFFFFFF);
        const hex = Math.max(rgb,100).toString(16);
        return `#${hex}`;
    };
    const selectedIndex = new Set();
    const curriculums = [
        {
            "className": "Pre Medi M1",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 고등 수학 선행",
            "target": "[6]",
            "id": "대치동_1_1_1_1",
            "start": "19:00",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "Pre Medi M1",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 고등 수학 선행",
            "target": "[6]",
            "id": "대치동_1_1_1_1",
            "start": "19:00",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "Pre Medi S1",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 5학년] 중등 수학 선행",
            "target": "[5]",
            "id": "대치동_1_1_1_9",
            "start": "15:40",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "Pre Medi S1",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 5학년] 중등 수학 선행",
            "target": "[5]",
            "id": "대치동_1_1_1_9",
            "start": "15:40",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "Pre Medi M2",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 4학년] 초6 수학 선행",
            "target": "[4]",
            "id": "대치동_1_1_1_14",
            "start": "15:40",
            "minute": 180,
            "week": "화",
            "end": ""
        },
        {
            "className": "Pre Medi M2",
            "location": "대치동 대치 파인만 학원",
            "subject": "수학",
            "content": "[수학 4학년] 초6 수학 선행",
            "target": "[4]",
            "id": "대치동_1_1_1_14",
            "start": "15:40",
            "minute": 180,
            "week": "목",
            "end": ""
        },
        {
            "className": "초등 일품",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_1",
            "start": "15:15",
            "minute": 110,
            "week": "월",
            "end": ""
        },
        {
            "className": "초등 일품",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_1",
            "start": "15:15",
            "minute": 110,
            "week": "금",
            "end": ""
        },
        {
            "className": "초등 실력",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_2",
            "start": "15:15",
            "minute": 110,
            "week": "월",
            "end": ""
        },
        {
            "className": "초등 실력",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_2",
            "start": "15:15",
            "minute": 110,
            "week": "수",
            "end": ""
        },
        {
            "className": "초등 심화",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_3",
            "start": "15:15",
            "minute": 110,
            "week": "화",
            "end": ""
        },
        {
            "className": "초등 심화",
            "location": "대치동 대치 생각하는 황소",
            "subject": "수학",
            "content": "[수학 3, 4학년] 초등 과정 선행",
            "target": "[3, 4]",
            "id": "대치동_1_1_2_3",
            "start": "15:15",
            "minute": 110,
            "week": "목",
            "end": ""
        },
        {
            "className": "4특목1",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 4학년]중1 선행",
            "target": "[4]",
            "id": "대치동_1_1_3_16",
            "start": "15:20",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "4특목1",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 4학년]중1 선행",
            "target": "[4]",
            "id": "대치동_1_1_3_16",
            "start": "15:20",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "5특목1",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 5학년 중3 선행",
            "target": "[5]",
            "id": "대치동_1_1_3_23",
            "start": "15:20",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "5특목1",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 5학년 중3 선행",
            "target": "[5]",
            "id": "대치동_1_1_3_23",
            "start": "15:20",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "6영과A",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 6학년] 경시 대비",
            "target": "[6]",
            "id": "대치동_1_1_3_36",
            "start": "17:00",
            "minute": 270,
            "week": "화",
            "end": ""
        },
        {
            "className": "6영과A",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 6학년] 경시 대비",
            "target": "[6]",
            "id": "대치동_1_1_3_36",
            "start": "17:00",
            "minute": 270,
            "week": "목",
            "end": ""
        },
        {
            "className": "6영과A",
            "location": "대치동 대치 개념폴리아",
            "subject": "수학",
            "content": "[수학 6학년] 경시 대비",
            "target": "[6]",
            "id": "대치동_1_1_3_36",
            "start": "10:00",
            "minute": 180,
            "week": "토",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "대치동 DYB 최선어학원 대치",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "대치동_1_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "월",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "대치동 DYB 최선어학원 대치",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "대치동_1_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "수",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "대치동 DYB 최선어학원 대치",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "대치동_1_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "금",
            "end": ""
        },
        {
            "className": "1학년 Gold",
            "location": "대치동 띵킹어학원 대치",
            "subject": "영어",
            "content": "[영어 1학년] 회화 리딩",
            "target": "[1]",
            "id": "대치동_1_2_2_1",
            "start": "18:30",
            "minute": 180,
            "week": "화",
            "end": ""
        },
        {
            "className": "1학년 Gold",
            "location": "대치동 띵킹어학원 대치",
            "subject": "영어",
            "content": "[영어 1학년] 회화 리딩",
            "target": "[1]",
            "id": "대치동_1_2_2_1",
            "start": "18:30",
            "minute": 180,
            "week": "목",
            "end": ""
        },
        {
            "className": "3학년 Mint",
            "location": "대치동 띵킹어학원 대치",
            "subject": "영어",
            "content": "[영어 3학년] 회화 리딩",
            "target": "[1]",
            "id": "대치동_1_2_2_2",
            "start": "18:30",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "3학년 Mint",
            "location": "대치동 띵킹어학원 대치",
            "subject": "영어",
            "content": "[영어 3학년] 회화 리딩",
            "target": "[1]",
            "id": "대치동_1_2_2_2",
            "start": "18:30",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "초5 정규반",
            "location": "대치동 대치 김영준 국어 학원",
            "subject": "국어",
            "content": "[국어 5학년] 논술 토론",
            "target": "[5]",
            "id": "대치동_1_3_1_1",
            "start": "10:00",
            "minute": 180,
            "week": "토",
            "end": ""
        },
        {
            "className": "초5 정규반",
            "location": "대치동 대치 김영준 국어 학원",
            "subject": "국어",
            "content": "[국어 5학년] 논술 토론",
            "target": "[5]",
            "id": "대치동_1_3_1_1",
            "start": "10:00",
            "minute": 180,
            "week": "일",
            "end": ""
        },
        {
            "className": "초6 정규반",
            "location": "대치동 대치 김영준 국어 학원",
            "subject": "국어",
            "content": "[국어 6학년] 논술 토론",
            "target": "[5]",
            "id": "대치동_1_3_1_1",
            "start": "10:00",
            "minute": 180,
            "week": "수",
            "end": ""
        },
        {
            "className": "초6 정규반",
            "location": "대치동 대치 김영준 국어 학원",
            "subject": "국어",
            "content": "[국어 6학년] 논술 토론",
            "target": "[5]",
            "id": "대치동_1_3_1_1",
            "start": "10:00",
            "minute": 180,
            "week": "토",
            "end": ""
        },
        {
            "className": "초6 정규반",
            "location": "대치동 대치 김영준 국어 학원",
            "subject": "국어",
            "content": "[국어 6학년] 논술 토론",
            "target": "[5]",
            "id": "대치동_1_3_1_1",
            "start": "10:00",
            "minute": 180,
            "week": "일",
            "end": ""
        },
        {
            "className": "초등 오전반",
            "location": "대치동 은마 태권도",
            "subject": "운동",
            "content": "[초등 전학년] 태권도",
            "target": "[1, 2, 3, 4, 5, 6]",
            "id": "대치동_1_4_1_1",
            "start": "17:00",
            "minute": 60,
            "week": "월",
            "end": ""
        },
        {
            "className": "초등 오전반",
            "location": "대치동 은마 태권도",
            "subject": "운동",
            "content": "[초등 전학년] 태권도",
            "target": "[1, 2, 3, 4, 5, 6]",
            "id": "대치동_1_4_1_2",
            "start": "12:00",
            "minute": 60,
            "week": "화",
            "end": ""
        },
        {
            "className": "4학년 정규반",
            "location": "분당 참토론 국어 학원",
            "subject": "국어",
            "content": "[국어 4학년] 논술 토론",
            "target": "[4]",
            "id": "분당_2_3_1_2",
            "start": "14:00",
            "minute": 100,
            "week": "수",
            "end": ""
        },
        {
            "className": "4학년 정규반",
            "location": "분당 참토론 국어 학원",
            "subject": "국어",
            "content": "[국어 4학년] 논술 토론",
            "target": "[4]",
            "id": "분당_2_3_1_2",
            "start": "14:00",
            "minute": 100,
            "week": "토",
            "end": ""
        },
        {
            "className": "5학년 정규반",
            "location": "분당 참토론 국어 학원",
            "subject": "국어",
            "content": "[국어 5학년] 논술 토론",
            "target": "[5]",
            "id": "분당_2_3_1_3",
            "start": "16:00",
            "minute": 120,
            "week": "화",
            "end": ""
        },
        {
            "className": "5학년 정규반",
            "location": "분당 참토론 국어 학원",
            "subject": "국어",
            "content": "[국어 5학년] 논술 토론",
            "target": "[5]",
            "id": "분당_2_3_1_3",
            "start": "16:00",
            "minute": 120,
            "week": "수",
            "end": ""
        },
        {
            "className": "5학년 정규반",
            "location": "분당 참토론 국어 학원",
            "subject": "국어",
            "content": "[국어 5학년] 논술 토론",
            "target": "[5]",
            "id": "분당_2_3_1_3",
            "start": "10:00",
            "minute": 120,
            "week": "토",
            "end": ""
        },
        {
            "className": "Pre 의치1",
            "location": "분당 분당 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 중1 선행",
            "target": "[6]",
            "id": "분당_2_1_1_1",
            "start": "19:10",
            "minute": 110,
            "week": "화",
            "end": ""
        },
        {
            "className": "Pre 의치1",
            "location": "분당 분당 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 중1 선행",
            "target": "[6]",
            "id": "분당_2_1_1_1",
            "start": "19:10",
            "minute": 110,
            "week": "목",
            "end": ""
        },
        {
            "className": "Pre 의치2",
            "location": "분당 분당 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 중1 선행",
            "target": "[6]",
            "id": "분당_2_1_2_1",
            "start": "19:10",
            "minute": 110,
            "week": "월",
            "end": ""
        },
        {
            "className": "Pre 의치2",
            "location": "분당 분당 파인만 학원",
            "subject": "수학",
            "content": "[수학 6학년] 중1 선행",
            "target": "[6]",
            "id": "분당_2_1_2_1",
            "start": "19:10",
            "minute": 110,
            "week": "금",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "분당 DYB 최선어학원 분당",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "분당_2_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "월",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "분당 DYB 최선어학원 분당",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "분당_2_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "수",
            "end": ""
        },
        {
            "className": "초등부",
            "location": "분당 DYB 최선어학원 분당",
            "subject": "영어",
            "content": "[영어 4, 5, 6 학년] 회화 리딩",
            "target": "[4, 5, 6]",
            "id": "분당_2_2_1_1",
            "start": "16:00",
            "minute": 120,
            "week": "금",
            "end": ""
        },
        {
            "className": "중등 선행",
            "location": "분당 미래탐구 분당",
            "subject": "수학",
            "content": "[수학 4, 5, 6 학년] 중1 선행",
            "target": "[4, 5, 6]",
            "id": "분당_2_1_2_1",
            "start": "17:00",
            "minute": 180,
            "week": "월",
            "end": ""
        },
        {
            "className": "중등 선행",
            "location": "분당 미래탐구 분당",
            "subject": "수학",
            "content": "[수학 4, 5, 6 학년] 중1 선행",
            "target": "[4, 5, 6]",
            "id": "분당_2_1_2_1",
            "start": "17:00",
            "minute": 180,
            "week": "수",
            "end": ""
        },
        {
            "className": "중등 선행",
            "location": "분당 미래탐구 분당",
            "subject": "수학",
            "content": "[수학 4, 5, 6 학년] 중1 선행",
            "target": "[4, 5, 6]",
            "id": "분당_2_1_2_1",
            "start": "17:00",
            "minute": 180,
            "week": "금",
            "end": ""
        },
        {
            "className": "S1-2",
            "location": "분당 링키 영어 분당",
            "subject": "영어",
            "content": "[영어 1, 2 학년] 회화, 리딩",
            "target": "[1, 2]",
            "id": "분당_2_2_2_1",
            "start": "14:30",
            "minute": 50,
            "week": "월",
            "end": ""
        },
        {
            "className": "S1-2",
            "location": "분당 링키 영어 분당",
            "subject": "영어",
            "content": "[영어 1, 2 학년] 회화, 리딩",
            "target": "[1, 2]",
            "id": "분당_2_2_2_1",
            "start": "14:30",
            "minute": 50,
            "week": "수",
            "end": ""
        },
        {
            "className": "S 2-2",
            "location": "분당 링키 영어 분당",
            "subject": "영어",
            "content": "[영어 3, 4 학년] 회화, 리딩",
            "target": "[3, 4]",
            "id": "분당_2_2_2_2",
            "start": "15:30",
            "minute": 50,
            "week": "월",
            "end": ""
        },
        {
            "className": "S 2-2",
            "location": "분당 링키 영어 분당",
            "subject": "영어",
            "content": "[영어 3, 4 학년] 회화, 리딩",
            "target": "[3, 4]",
            "id": "분당_2_2_2_2",
            "start": "15:30",
            "minute": 50,
            "week": "수",
            "end": ""
        },
        {
            "className": "Speed Phonics1",
            "location": "분당 링키 영어 분당",
            "subject": "영어",
            "content": "[영어 1~4 학년] 파닉스",
            "target": "[1, 2, 3, 4]",
            "id": "분당_2_2_2_3",
            "start": "15:30",
            "minute": 50,
            "week": "금",
            "end": ""
        }
    ]
    curriculums.forEach(it => {
        it.target = JSON.parse(it.target).map(it => `${it} 학년`);
        const a = it.start.split(':').map(it => parseInt(it)) ;
        const now = new Date();
        now.setHours(a[0] ?? 0, a[1] ?? 0);
        now.setMinutes(now.getMinutes() + parseInt(it.minute) ?? 0);
        it.end = `${(String(now.getHours())).padStart(2, '0')}:${(String(now.getMinutes()).padStart(2, '0'))}`;
    });
    // group by array
    Object.groupBy = function (array, f) {
        const groups = {};
        array.forEach(function (o) {
            const group = JSON.stringify(f(o));
            groups[group] = groups[group] || [];
            groups[group].push(o);
        });
        return groups;
    };
    const curriculumGroup = Object.groupBy(curriculums, ({ location, className, id }) => `${location}-${className}-${id}`);
    console.log('-curriculumGroup',curriculumGroup, Array.from(Object.entries(curriculumGroup)).length)
    const curriculumsSet = Object.entries(curriculumGroup).map(([key,data], index) => ({
        color: randomRgbHex(),
        className: data[0].className,
        location: data[0].location,
        content: data[0].content,
        id: data[0].id,
        week: data.map(it => it.week).join(', '),
        start: data[0].start,
        end: data[0].end,
        curriculums: data,
    }))

    console.log('-curriculumsSet',curriculumsSet)
    // const now = new Date();
    // curriculums.forEach(it => {
    //     // const a = it.start.split(':').map(it => parseInt(it));
    //     // now.setHours(a[0] ?? 0, a[1] ?? 0);
    //     // it.startTime = now.toISOString();
    //     // now.setMinutes(now.getMinutes() + parseInt(it.end) ?? 0);
    //     // it.endTime = now.toISOString();
    //     it.target = JSON.parse(it.target).map(it => `${it} 학년`);
    //     it.color = randomRgbHex();
    // });

    const listContainer = document.querySelector('#list-container')
    curriculumsSet.forEach((it, index) => {
        const div = document.createElement('div');
        div.classList.add('list-item-container');
        div.innerHTML = `
<!--                    <div class="class-name-container"><div>${it.className}</div><div>${it.id}</div></div>-->
                    <div class="location-container">${it.location}</div>
                    <div class="content-container">${it.content}</div>
                    <div class="time-container">
                    <div>
${it.week}
</div>
<div>${it.start}</div><div>-</div><div style="white-space: nowrap">${it.end}</div>
</div>
<!--                    <div class="time-container"></div>-->
            `;
        div.addEventListener('click', () => {
            if(selectedIndex.has(index)){
                selectedIndex.delete(index)
                div.classList.remove('checked');
            } else {
                selectedIndex.add(index);
                div.classList.add('checked');
            }
            apply();
        });
        listContainer.appendChild(div);
    });
</script>
<script>
    const apply = () => {
        calendar.clear();
        const selectedCurriculums = [];
        let min = 24;
        let max = 0;
        selectedIndex.forEach(it => {
            const curriculum = curriculumsSet[it];


            curriculum.curriculums.forEach(it => {
                const today = new Date();
                // 이번 주 월요일 날짜 계산하기
                // 오늘 요일 가져오기 (0: 일요일, 6: 토요일)
                const todayDay = today.getDay();
                // const targetDay = todayDay - (todayDay + 1) % 7; // 특정 요일 (0: 일요일, 6: 토요일)
                const targetDay = todayDay === 0 ? 6 : todayDay - 1;
                const mondayDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - targetDay);
                // console.log('--', mondayDate, today.getDate());
                const weeks = ['월', '화', '수', '목', '금', '토', '일'];
                mondayDate.setDate(mondayDate.getDate() + weeks.indexOf(it.week));
                mondayDate.setHours(0, 0, 0, 0);
                const a = it.start.split(':').map(it => parseInt(it)) ;
                mondayDate.setHours((a[0] ?? 0) , a[1] ?? 0);
                min = Math.min(min, mondayDate.getHours());
                // const start = '2024-02-25T10:30:00';
                const start = `${mondayDate.getFullYear()}-${(String(mondayDate.getMonth() + 1)).padStart(2,'0')}-${(String(mondayDate.getDate())).padStart(2, '0')}T${(String(mondayDate.getHours())).padStart(2, '0')}:${(String(mondayDate.getMinutes())).padStart(2, '0')}`;
                // console.log('!!', it.week, mondayDate.toISOString())
                // const start = mondayDate.toISOString().split('.')[0];
                mondayDate.setMinutes(mondayDate.getMinutes() + parseInt(it.minute) ?? 0);
                max = Math.max(max, mondayDate.getHours());
                // const end = '2024-02-25T12:30:00'
                const end = `${mondayDate.getFullYear()}-${(String(mondayDate.getMonth() + 1)).padStart(2,'0')}-${(String(mondayDate.getDate())).padStart(2, '0')}T${(String(mondayDate.getHours())).padStart(2, '0')}:${(String(mondayDate.getMinutes())).padStart(2, '0')}`;
                // console.log('!!', min, max, start, end);

                // return;
                selectedCurriculums.push({
                    id: curriculum.id,
                    title: it.location + '\n' + it.content,
                    body: it.className,
                    start: start,
                    end: end,
                    location: it.content,
                    attendees: it.target,
                    category: 'time',
                    state: 'OPEN',
                    isReadOnly: true,
                    color: '#fff',
                    backgroundColor: curriculum.color,
                    customStyle: {
                        fontStyle: 'italic',
                        fontSize: '15px',
                    }
                });
            });

        });

        // calendar.setOptions({  week: {hourStart: min, hourEnd: max}})
        console.log('!!', selectedCurriculums, min, max);
        calendar.createEvents(selectedCurriculums);

        setTimeout(() => {
            const focus = document.querySelector('.toastui-calendar-event-time-content')
            if (focus){
                focus.scrollIntoView({behavior: "smooth", block: "center", inline: "nearest"});
            }
        }, 200)
    }
</script>
</body>
</html>
